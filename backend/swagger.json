{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":""}}}},"/clients":{"post":{"operationId":"ClientController_register","summary":"Registrar un nuevo cliente","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateClientDto"}}}},"responses":{"201":{"description":"Cliente registrado exitosamente"},"400":{"description":"Datos de entrada inválidos"},"409":{"description":"El cliente ya existe (documento o email duplicado)"}},"tags":["Clients"]},"get":{"operationId":"ClientController_findAll","summary":"Listar todos los clientes","parameters":[],"responses":{"200":{"description":"Lista de clientes obtenida exitosamente"}},"tags":["Clients"]}},"/clients/{document}":{"get":{"operationId":"ClientController_findByDocument","summary":"Buscar cliente por documento","parameters":[{"name":"document","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Cliente encontrado"},"404":{"description":"Cliente no encontrado"}},"tags":["Clients"]}},"/wallet/recharge":{"post":{"operationId":"WalletController_recharge","summary":"Recargar saldo de billetera","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RechargeWalletDto"}}}},"responses":{"200":{"description":"Recarga exitosa"},"400":{"description":"Teléfono no coincide con el documento"},"404":{"description":"Cliente no encontrado"}},"tags":["Wallet"]}},"/wallet/balance":{"get":{"operationId":"WalletController_getBalance","summary":"Consultar saldo de billetera","parameters":[{"name":"document","required":true,"in":"query","description":"Documento de identidad del cliente","schema":{"minLength":6,"maxLength":20,"example":"1234567890","type":"string"}},{"name":"phone","required":true,"in":"query","description":"Número de teléfono del cliente","schema":{"minLength":10,"maxLength":15,"example":"3001234567","type":"string"}}],"responses":{"200":{"description":"Consulta exitosa"},"400":{"description":"Teléfono no coincide con el documento o parámetros inválidos"},"404":{"description":"Cliente no encontrado"}},"tags":["Wallet"]}},"/payment/request":{"post":{"operationId":"PaymentController_requestPayment","summary":"Solicitar pago y generar token OTP","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentRequestDto"}}}},"responses":{"201":{"description":"Token enviado exitosamente al correo del cliente"},"400":{"description":"Teléfono no coincide o saldo insuficiente"},"404":{"description":"Cliente no encontrado"},"500":{"description":"Error al enviar el correo electrónico"}},"tags":["Payment"]}},"/payment/confirm":{"post":{"operationId":"PaymentController_confirmPayment","summary":"Confirmar pago con token OTP","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentConfirmDto"}}}},"responses":{"200":{"description":"Pago confirmado exitosamente","content":{"application/json":{"schema":{"example":{"status":200,"success":true,"message":"Pago confirmado exitosamente","data":{"message":"Pago confirmado exitosamente","newBalance":90000,"transactionId":"f3629535-5369-4f50-ae05-6d8716c6c06a","amount":10000}}}}}},"400":{"description":"Token expirado o saldo insuficiente"},"401":{"description":"Token inválido"},"404":{"description":"Sesión no encontrada"},"409":{"description":"Transacción ya procesada"}},"tags":["Payment"]}}},"info":{"title":"ePayco Wallet API","description":"API REST para sistema de billetera digital con funcionalidades de registro de clientes, recarga de saldo y pagos con autenticación 2FA mediante tokens OTP.","version":"1.0.0","contact":{"name":"Equipo de Desarrollo","url":"https://github.com/yenselleon/epayco-wallet","email":"yensel41@gmail.com"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"}},"tags":[{"name":"Client","description":"Gestión de clientes y registro de usuarios"},{"name":"Wallet","description":"Operaciones de recarga y consulta de saldo"},{"name":"Payment","description":"Flujo de pagos con autenticación OTP (2FA)"}],"servers":[{"url":"http://localhost:3000","description":"Servidor de Desarrollo"},{"url":"https://api.epayco-wallet.com","description":"Servidor de Producción"}],"components":{"schemas":{"CreateClientDto":{"type":"object","properties":{"document":{"type":"string","description":"Documento de identidad del cliente","example":"1234567890","minLength":6,"maxLength":20},"name":{"type":"string","description":"Nombre completo del cliente","example":"Juan Pérez","minLength":3,"maxLength":100},"email":{"type":"string","description":"Correo electrónico del cliente","example":"juan.perez@example.com"},"phone":{"type":"string","description":"Número de teléfono del cliente","example":"3001234567","minLength":10,"maxLength":15}},"required":["document","name","email","phone"]},"RechargeWalletDto":{"type":"object","properties":{"document":{"type":"string","description":"Documento de identidad del cliente","example":"1234567890","minLength":6,"maxLength":20},"phone":{"type":"string","description":"Número de teléfono del cliente","example":"3001234567","minLength":10,"maxLength":15},"amount":{"type":"number","description":"Monto a recargar","example":50000,"minimum":1,"maximum":10000000}},"required":["document","phone","amount"]},"PaymentRequestDto":{"type":"object","properties":{"document":{"type":"string","description":"Documento de identidad del cliente","example":"1234567890","minLength":6,"maxLength":20},"phone":{"type":"string","description":"Número de teléfono del cliente","example":"3001234567","minLength":10,"maxLength":15},"amount":{"type":"number","description":"Monto del pago","example":10000,"minimum":1,"maximum":10000000}},"required":["document","phone","amount"]},"PaymentConfirmDto":{"type":"object","properties":{"sessionId":{"type":"string","description":"ID de la sesión de transacción generada en /payment/request","example":"f3629535-5369-4f50-ae05-6d8716c6c06a","format":"uuid"},"token":{"type":"string","description":"Token OTP de 6 dígitos enviado por email","example":"826375","minLength":6,"maxLength":6,"pattern":"^\\d{6}$"}},"required":["sessionId","token"]}}}}